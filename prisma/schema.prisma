generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

enum UserStatus {
  active
  inactive
  deleted
}

model Customer {
  tenantId  String   @id
  domain    String
  active    Boolean  @default(true)
  autoSync  Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  users User[]
  roles Role[]
}

model Role {
  id          Int      @id @default(autoincrement())
  title       String
  tenantID    String
  description String?
  permissions String[]

  customer Customer @relation(fields: [tenantID], references: [tenantId])
  users    User[]
}

model User {
  oid        String     @id
  email      String
  roleId     Int
  tenantId   String
  status     UserStatus @default(active)
  firstLogin DateTime?
  lastActive DateTime?
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt

  role     Role     @relation(fields: [roleId], references: [id])
  customer Customer @relation(fields: [tenantId], references: [tenantId])
}
